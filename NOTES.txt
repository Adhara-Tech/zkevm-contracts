version="v10.0.0-rc.6-fork.12"
docker build . \
  --tag local/zkevm-contracts:$version \
  --build-arg POLYCLI_VERSION="v0.1.73" \
  --build-arg FOUNDRY_VERSION=stable \
  --file zkevm-contracts.Dockerfile

  cast call 0x0ba8688239009E5748895b06D30556040b0866b5 "bridgeManager()" --rpc-url http://$(kurtosis port print cdk el-1-geth-lighthouse rpc)
  cast code 0x0ba8688239009E5748895b06D30556040b0866b5 --rpc-url $(kurtosis port print cdk op-el-1-op-geth-op-node-001 rpc)


0x6c7668770000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000449d09ef6dbdf39f0de90de059f5b561e72fbb1383b5cd30bf452838ef2f73ae3bf7c96c1cd29b3875d464b84c1db18c8a7a93d22c55b31e59aeeb670f77c6a8b00000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000046000000000000000000000000000000000000000000000000000000000000003641b34fe110c2025f4b9e14c23ef011f9eb1a64393c24c8f2cd0e6ca54a4aa983eb53377a7302223eda95a5b78ae35a1ec2b7f9298a2973483cba7f5117efd7f702bf943800be0689fdc0f8adc78a0f5d70649ecd8322a19b2714453c3431ae85bb046d09e16a5bea9a134c8352a85561d85f07631d3f574e8bc6040892b46bf786a3d48f913c10bbee6bceeb848052918b58a40b0badcd78fe708f443c7b70ce9dbdc04a2160a5fd376050573239722d8bdb2afced909dc2b6c8bb4c9861e6095ba0e83cb288f30e3351d3b7e5374b6b55e485cb5ab2d912ee30b7da62eaf47123e7c86aa087babfef1908e8be54990ada7ef9e478c3ade5c7ec1e7891b099671719c1ce81392e7dd8f36e0beb65a6b5f22bbc6a58666fe441960aefeb856ac238d91172f1890cde16b4fb2d19e62743c0e2662ab430b10c5d314fe3993df4d4a55c61bad176e14f88ccf9dd96c27cf218e0d4d5af129a99dd35e759ba2aa4dd347f1b20c2e84d081468a96fc3c128840108850210c77242589fd4d1e416f4bcfd5a0ea920f298f2c0d09e7704ed2ed00a547a41a3b7b5782929688e00eb8b6c089a5b9500246848ff6750e163ba6b7152fce0fecfee17b54baa74c2424de0b371b9e10ce28738a9e2425d9bbef876200fca235bfe3008c0dafd0895f1aa65b3f9edfe2f60862bfdaae86d13cc7469d527a34e5736c157cc07fd88fd8820d62cdc4fa9e302a66e97f905bedd08b9fb205bb401d8c83e00d6b11bbd070ecda48acefd8ab971c0bb50a267bfe4b76090dad088247827e25d2275746eb8cba84b879cd9a4ab6182ee86d155a03bfccaa035ce43482aef11500de84df4ec1791df2a1a017d88428a29d06a739c26182b57005d2f9abc12756b9aeafc2b687df45f041a2a84daf1f9f32e41e209add9fa90714430454539246a6a04c00442c058acbf2cd2445d12d819101f36989f512d388b1e233007b717dd63808234ae92b4c75e038427f0f120405366539fa42d0a0391b03a1dfd90baef9f6e4439414cdf76f3f55b008e6028c80e7c2fb686ce464bb8cdebfb0161d0234d01520a38e3a411e4c50c97f7513bc4455d0b025b74fa532817c3a98eefd67c5c0554d92a33b23d5d4409e8bf02f888192696747b6af704ff8d52ddc208a1d4b591f4704f2340c15bf691fe25c2ab1f09d46be184472d6a3a6b9150149bf20e53ee2e9fd84b89dcef54dfd1153000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000


cast send 0xf22E2B040B639180557745F47aB97dFA95B1e22a --private-key 0x12d7de8621a77640c9241b2595ba78ce443d05e94090365ab3bb5e19df82c625 "updateDefaultAggchainVKey(bytes4,bytes32)" "0x00000001" "0x9858d85f8e5a516096e7b752346e28086ca8eb20feda243c760a2c52996b405f" --rpc-url http://$(kurtosis port print cdk el-1-geth-lighthouse rpc)


cast send 0xf22E2B040B639180557745F47aB97dFA95B1e22a --private-key 0x12d7de8621a77640c9241b2595ba78ce443d05e94090365ab3bb5e19df82c625 "addDefaultAggchainVKey(bytes4,bytes32)" "0x00000001" "0x9858d85f8e5a516096e7b752346e28086ca8eb20feda243c760a2c52996b405f" --rpc-url http://$(kurtosis port print cdk el-1-geth-lighthouse rpc)


cast call 0xf22E2B040B639180557745F47aB97dFA95B1e22a "defaultAggchainSelector(bytes4)" "0x00000001" --rpc-url "http://$(kurtosis port print cdk el-1-geth-lighthouse rpc)" --private-key 0x986b325f6f855236b0b04582a19fe0301eeecb343d0f660c61805299dbf250eb

cast call 0x0ba8688239009E5748895b06D30556040b0866b5 "claimedGlobalIndexHashChain()" --rpc-url $(kurtosis port print cdk op-el-1-op-geth-op-node-001 rpc)
cast call 0x494990B3d02A31718c22fdCd520cAa4C55f710B3 "globalExitRootUpdater()" --rpc-url $(kurtosis port print cdk op-el-1-op-geth-op-node-001 rpc)


curl http://127.0.0.1:33605 \
-X POST \
-H "Content-Type: application/json" \
--data '{"method":"debug_traceTransaction","params":["0xb4a019b0ce49b753499ba489fb1b87de81fb479a7a8be754fa77f73b98400bb8", {"tracer": "callTracer"}], "id":1,"jsonrpc":"2.0"}'


{
  "nonce": "0x4",
  "gasPrice": "0x352a101",
  "gasLimit": "0xe56d",
  "to": "0x494990b3d02a31718c22fdcd520caa4c55f710b3",
  "value": "0x0",
  "data": "0x12da06b2a098326a1fc343280dc0ea6c82b82cfa07cbf427ce8e8165e9a95a888a7776bf",
  "v": "0x41abeb",
  "r": "0x3edc3f9673ff39458a48036b59bc66095649f2b6f9c90e2e62666c39016ca6f2",
  "s": "0x393220a63689bcc0f953e76d1f619a7cee2540e2b8261881bdfe687c2923f6fb"
}




$ cast keccak256 "VKeyCannotBeZero()"
0x6745305e97963d1a99e58b65110b2c2840ee0b1c7778d0e143c2eb51541bb3c4
- Verifier program key must be 0 for non-pessimistic consensus
- AggLayer Gateway deployment will revert with VKeyCAnnotBeZero()
- TL;DR only works with pessimistic

cast send "0xf22E2B040B639180557745F47aB97dFA95B1e22a" "addPessimisticVKeyRoute(bytes4,address,bytes32)" "0x00010000" "0x322e0cfC33f916379702396E6e41A6d2D97d0D96" "0x00ef49c487bbb8eacc6d910df2355b1c2c86dbdc593dbcebf85a393624d6ca86" \
--rpc-url http://127.0.0.1:32819 \
--private-key "0x12d7de8621a77640c9241b2595ba78ce443d05e94090365ab3bb5e19df82c625"

cast send "0xf22E2B040B639180557745F47aB97dFA95B1e22a" "freezePessimisticVKeyRoute(bytes4)" "0x00010000" \
--rpc-url http://127.0.0.1:32819 \
--private-key "0x12d7de8621a77640c9241b2595ba78ce443d05e94090365ab3bb5e19df82c625"

cast call 0x414e9E227e4b589aF92200508aF5399576530E4e "aggchainManager()" --rpc-url http://127.0.0.1:33222


addPessimisticVKeyRoute(
        bytes4 pessimisticVKeySelector,
        address verifier,
        bytes32 pessimisticVKey
    )